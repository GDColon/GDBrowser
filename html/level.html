<head>
	<title>[[NAME]] ([[ID]])</title>
	<meta charset="utf-8">
	<link href="../css/browser.css" type="text/css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135255146-3"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-135255146-3');</script>
	<link rel="icon" href="../difficulty/[[DIFFICULTYFACE]].png">
	<meta id="meta-title" property="og:title" content="[[NAME]] by [[AUTHOR]]">
	<meta id="meta-desc" property="og:description" content="ID: [[ID]] | Stars: [[STARS]] | Difficulty: [[DIFFICULTY]] | Downloads: [[DOWNLOADS]] | Likes: [[LIKES]] | Length: [[LENGTH]] | Song: [[SONGNAME]] ([[SONGID]])">
	<meta id="meta-image" name="og:image" itemprop="image" content="https://gdbrowser.com/difficulty/[[DIFFICULTYFACE]].png">
</head>

<body class="levelBG" onbeforeunload="saveUrl()">

<div id="everything">

	<div class="popup" id="infoDiv">
		<div class="fancybox bounce supercenter">
			<h2 class="smaller" style="font-size: 5.5vmin">Level Info</h2>
			<p class="bigger" id="levelInfo" style="line-height: 5vmin; margin-top: 1.5vmin;">
				<span style="color:lime">[[NAME]]</span><br>
				ID: <span style="color:yellow">[[ID]]</span>[[ORIGINALINFO]][[LOWDETAIL]][[PASS]][[UPLOAD]][[UPDATE]]
				<br>Version:  <span style="color:yellow">[[VERSION]]</span>
				[[OBJECTINFO]][[REQUESTED]]
			</p>
			<img src="../assets/ok.png" style="height: 6vmin" class="gdButton closeWindow">
		</div>
	</div>

	<div class="popup" id="scoreDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vmin">Leaderboards</h2>
			<p class="bigger center" style="line-height: 5vmin; margin-top: 1.5vmin;">
				<span style="color:yellow">Leaderboards</span> are coming soonâ„¢
			</p>
			<img src="../assets/ok.png" style="height: 6vmin" class="gdButton center closeWindow">
		</div>
	</div>

	<div class="popup" id="saveDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vmin">Saved!</h2>
			<p class="bigger center" style="line-height: 5vmin; margin-top: 1.5vmin;">
				<span style="color:yellow">[[NAME]]</span> has been added to your <a class="youCanClickThis2" style="color:lime" href="../search/levels?type=saved">saved levels</a> list.
			</p>
			<img src="../assets/ok.png" style="height: 6vmin" class="gdButton center" onclick="location.reload()">
		</div>
	</div>

	<div class="popup" id="deleteDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vmin">Delete Level</h2>
			<p class="bigger center" style="line-height: 5vmin; margin-top: 1.5vmin;">
				Are you sure you want to <span style="color:#C67A7E">delete</span> this level from your <a class="youCanClickThis2"style="color:lime" href="../search/levels?type=saved">saved levels </a>list?
      </p>
      <div class="flex spaceAround" style="width: 100%;">
        <img src="../assets/btn-no.png" style="height: 6vmin" class="gdButton closeWindow">
        <img src="../assets/btn-yes.png" style="height: 6vmin" class="gdButton" onclick="deleteLevel()">
      </div>
		</div>
	</div>

	<div style="position:absolute; bottom: 0%; left: 0%; width: 100%">
		<img class="cornerPiece" src="../assets/corner.png" width=7%;>
	</div>

	<div style="position:absolute; bottom: 0%; right: 0%; width: 100%; text-align: right;">
		<img class="cornerPiece" src="../assets/corner.png" width=7%; style="transform: scaleX(-1)">
	</div>
  <div class="flex vertical spaceAround" style="height: 95%;">
    <div class="center" style="width: 70%; margin: 1% auto">
      <h1 style="font-size: 8vmin">[[NAME]]</h1>
    </div>
  
    <div class="center flex vertical spaceBetween" style="height: 10%;">
      <h2 class="slightlySmaller normalCursor gdButton" id="authorName"><a class="linkButton" id="authorLink" href="../profile/[[AUTHOR]]">By [[AUTHOR]]</a></h2>
      <div class="normalCursor flex spaceAround" style="width: 50%; height: 100%;">
        <img id="copiedBadge" style="height: 4vmin; cursor: help" src="../assets/copied.png" title="Level is a copy or a collaboration">
        <img id="largeBadge" style="height: 4vmin; cursor: help" src="../assets/large.png" title="Contains more than 40,000 objects">
      </div>
    </div>

    <div class="flex" style="width: 60vw; height: 75%; max-height: 75vmin; text-align: center; justify-content: center; padding-left: 10vw">
      <div class="flex vertical" style="height: 80%; justify-content: center;">
        <div class="flex vertical">
          <img src="../difficulty/[[DIFFICULTYFACE]].png" style="height: 12vmin">
          <h3 style="font-size: 4vmin" id="difficultytext">[[DIFFICULTY]]</h3>
        </div>
        <div class="flex stars"><h1 style="width: 100%; font-size: 4vmin">[[STARS]]</h1><img src="../assets/star.png" style="height: 3vmin; padding-bottom: 0.5vmin;"></div>
        <div class="flex diamonds"><h1 style="width: 100%; font-size: 4vmin">[[DIAMONDS]]</h1><img src="../assets/diamond.png" style="height: 3vmin; padding-bottom: 0.5vmin;"></div>
        <div class="flex demonList" style="display: none;"><h1 style="width: 100%; font-size: 4vmin">#[[DEMONLIST]]</h1><img src="../assets/demon.png" style="height: 3vmin; padding-bottom: 0.5vmin"></div>
        <div id="coins" class="flex" style="width: 100%; justify-content: center; padding-right: 1vmin;"></div>
      </div>
      <div class="noClick">
        <img class="gdButton yesClick" id="playButton" src="../assets/play.png" style="width: 50%;">
      </div>
      <div class="flex vertical spaceAround" id="extraData" style="align-items: flex-start; height: 70%; width: 30%;">
        <div class="flex"><img src="../assets/download.png" style="height: 5.5vmin; padding-bottom: 0.5vmin; margin-right: 1vmax;"><h1 style="width: 100%; font-size: 6vmin">[[DOWNLOADS]]</h1></div>
        <div class="flex"><img src="../assets/like.png" style="height: 5.5vmin; padding-bottom: 0.5vmin; margin-right: 1vmax;"><h1 style="width: 100%; font-size: 6vmin">[[LIKES]]</h1></div>
        <div class="flex"><img src="../assets/time.png" style="height: 5.5vmin; padding-bottom: 0.5vmin; margin-right: 1vmax;"><h1 style="width: 100%; font-size: 6vmin">[[LENGTH]]</h1></div>
      </div>
    </div>
    <div class="transparentBox" style="width: 45vw; overflow-wrap: break-word; text-align: center; margin-bottom: 2%;">
      <p style="padding: 0 5%;">[[DESCRIPTION]]</p>
    </div>
    <div class="brownBox flex spaceBetween" id="songBox" style="min-width: 40%; max-width: 60%;">
      <div class="flex vertical spaceBetween" style="align-items: flex-start;">
        <h1 class="slightlySmaller" id="songname" style="overflow-wrap:break-word">[[SONGNAME]]</h1>
        <h2 class="smaller">By: [[SONGAUTHOR]] <a class="songLink" href="https://[[SONGAUTHOR]].newgrounds.com" target="_blank"><img class="gdButton valign" src="../assets/more.png" width="12%"></a></h2>
        <div class="flex spaceBetween" style="width: 80%; align-self: flex-end; margin-top: 5%;"><h3 id="songID">SongID: [[SONGID]]</h3><h3 id="songSize" style="text-align: right;">Size: [[SONGSIZE]]</h3></div>
      </div>
      <a class="songLink" href="https://www.newgrounds.com/audio/listen/[[SONGID]]" target="_blank" style="display: inline-flex; align-self: flex-end"><img class="gdButton" src="../assets/playsong.png" style="height: 60%; max-height: 9vmin; padding-left: 2vmin;"></a>
    </div>
  </div>
  <div class="levelButtons flex vertical spaceAround" style="height: 80%; position: absolute; top: 10%; right: 1vw;">
    <img class="gdButton" id="saveButton" src="../assets/plus.png" onclick="$('#saveDiv').show(); saveLevel()" style="height: 12vmin">
    <img class="gdButton" id="infoButton"  src="../assets/info.png"  onclick="$('#infoDiv').show()" style="height: 12vmin">
    <a style="height: 12vmin" href="./comments/[[ID]]"><img style="height: 100%; width: auto" class="gdButton" src="../assets/comment.png"></a>
    <a style="height: 12vmin" href="./analyze/[[ID]]"><img style="height: 100%; width: auto" class="gdButton" src="../assets/edit.png"></a>
    <img class="gdButton outOfOrder" id="scoreButton" src="../assets/leaderboard.png" onclick="$('#scoreDiv').show()" style="height: 12vmin">
  </div>

	<div style="position:absolute; top: 2%; left: 1.5%; width: 10%; height: 25%; pointer-events: none">
		<img class="gdButton yesClick" id="backButton" src="../assets/back.png" height="30%" onclick="backButton()">
	</div>
	<div id="copied" style="display: none;">
		<div class="copied center noClick" style="position:absolute; top: 36%; left: 50%; transform: translate(-50%,-50%); width: 80vmin">
			<h1 class="smaller noSelect">ID copied to clipboard</h1>
		</div>
  </div>
</div>
</body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script async type="text/javascript" src="../assets/sizecheck.js"></script>
<script>

if (window.location.href.endsWith('?download')) $('#infoDiv').show()

	let freeze = false;
	$('#playButton').click(function() {
	if (!($('#copied').is(':animated'))) $('#copied').stop().fadeIn(200).delay(500).fadeOut(500)
	var temp = $("<input>");
    $("body").append(temp);
    temp.val('[[ID]]').select();
    document.execCommand("copy"); temp.remove()})
$('.closeWindow').click(function() {if (!freeze) $(".popup").attr('style', 'display: none;')})

$('#difficultytext').html('[[DIFFICULTY]]'.replace(' ', "<br>"))

$('#levelInfo').html($('#levelInfo').html()
	.replace('[[ORIGINALINFO]]', [[COPIEDID]] ==  "0" ? "" : `<br>Original: <a class="youCanClickThis" href="/[[COPIEDID]]"><span style="color:aqua">[[COPIEDID]]</span></a>`)
	.replace('[[OBJECTINFO]]', '[[OBJECTS]]' ==  "0" ? "" : `<br>Objects: <span style="color:yellow">[[OBJECTS]]</span>`)
	.replace('[[REQUESTED]]', [[STARSREQUESTED]] ==  "0" ? "" : `<br>Stars Requested: <span style="color:yellow">[[STARSREQUESTED]]</span>`))
if ([[ORBS]] != 0)
    $('#extraData').append(`<div class="flex"><img src="../assets/orbs.png"  style="height: 5.5vmin; padding-bottom: 0.5vmin; margin-right: 1vmax;"><h1 style="width: 100%; font-size: 6vmin">[[ORBS]]</h1></div>`)
if (!'[[UPLOADED]]'.startsWith('[')) {
	$('#levelInfo').html($('#levelInfo').html()
	.replace('[[PASS]]', `<br>Password: <span style="color:orange">${'[[PASSWORD]]' == '0' ? "No copy" : '[[PASSWORD]]' == 1 ? "Free copy" : '[[PASSWORD]]'}</span>`)
	.replace('[[LOWDETAIL]]', `<br>Low Detail: <span style="color:orange">${[[LDM]] ? "Yes" : "No"}</span>`)
	.replace('[[UPLOAD]]', '[[UPLOADED]]' == "0" ? "" : `<br>Uploaded: <span style="color:orange">[[UPLOADED]]</span>`)
	.replace('[[UPDATE]]', '[[UPDATED]]' == "0" ? "" : `<br>Updated: <span style="color:orange">[[UPDATED]]</span>`))}

else {
	$('#levelInfo').html($('#levelInfo').html()
	.replace('[[PASS]]', "")
	.replace('[[LOWDETAIL]]', "")
	.replace('[[UPLOAD]]', "")
	.replace('[[UPDATE]]', "") + 
	`<br><a class="youCanClickThis" href="/[[ID]]?download"><span style="color:aqua">Download additional info</span></a>`
	)}

if (![[LARGE]]) $('#largeBadge').hide()
if ([[COPIEDID]] == 0) $('#copiedBadge').hide()
if ([[ORBS]] == 0) $('.orbs').hide()
if ([[STARS]] == 0) $('.stars').hide()
if ([[DIAMONDS]] == 0 || !'[[DEMONLIST]]'.startsWith("[")) $('.diamonds').hide()

if (!'[[DEMONLIST]]'.startsWith("[")) $('.demonList').show()
else $('.demonList').remove()


if ("[[SONGID]]".startsWith("Level")) {
	$('#songID').text('[[SONGID]]')
  $('.songLink').hide()
  $('#songSize').hide();
}

if ("[[INVALIDSONG]]" == "true") $('.songLink').hide()
if ("[[DISLIKED]]" == "true") $('#likeImg').attr('src', '../assets/dislike.png').css('transform', 'translateY(20%)')

let coinColor = [[VERIFIEDCOINS]] ? "silvercoin" : "browncoin"
$("#coins").append(`<img src="../assets/${coinColor}.png" style="height: 5vmin; padding-bottom: 0.5vmin; margin-right: -1.5vmin;">`.repeat([[COINS]]));

if ("[[ACCOUNTID]]" == "0") {
		$("#authorName").addClass("green").removeClass('gdButton')
		$("#authorLink").removeAttr('href')
	}

if (window.location.pathname == "/weekly") $('body').addClass('darkBG')



let savedLevels = JSON.parse(localStorage.getItem('saved') || '[]');
let deleteMode = false;
if (savedLevels.includes('[[ID]]')) {
	$('#saveButton').attr('src', '../assets/delete.png').attr('onclick', '$("#deleteDiv").show()')
}

function saveLevel() {
  savedLevels.push('[[ID]]');
  localStorage.setItem('saved', JSON.stringify(savedLevels));
}

function deleteLevel() {
  savedLevels = savedLevels.filter(function(el) {return el != '[[ID]]'})
  localStorage.setItem('saved', JSON.stringify(savedLevels));
  location.reload()
	freeze = true;
}

</script>