<head>
	<title>[[NAME]] ([[ID]])</title>
	<meta charset="utf-8">
	<link href="../css/browser.css" type="text/css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135255146-3"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-135255146-3');</script>
	<link rel="icon" href="../difficulty/[[DIFFICULTYFACE]].png">
	<meta id="meta-title" property="og:title" content="[[NAME]] by [[AUTHOR]]">
	<meta id="meta-desc" property="og:description" content="ID: [[ID]] | Stars: [[STARS]] | Difficulty: [[DIFFICULTY]] | Downloads: [[DOWNLOADS]] | Likes: [[LIKES]] | Length: [[LENGTH]] | Song: [[SONGNAME]] ([[SONGID]])">
	<meta id="meta-image" name="og:image" itemprop="image" content="https://gdbrowser.com/difficulty/[[DIFFICULTYFACE]].png">
</head>

<body class="levelBG" onbeforeunload="saveUrl()">

<div id="everything">

	<div class="popup" id="infoDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vh">Level Info</h2>
			<p class="bigger center" id="levelInfo" style="line-height: 5vh; margin-top: 1.5vh;">
				<span style="color:lime">[[NAME]]</span><br>
				ID: <span style="color:yellow">[[ID]]</span>[[ORIGINALINFO]][[LOWDETAIL]][[PASS]][[UPLOAD]][[UPDATE]]
				<br>Version:  <span style="color:yellow">[[VERSION]]</span>
				[[OBJECTINFO]][[REQUESTED]]
			</p>
			<img src="../assets/ok.png" width=20%; class="gdButton center closeWindow">
		</div>
	</div>

	<div class="popup" id="scoreDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vh">Leaderboards</h2>
			<p class="bigger center" style="line-height: 5vh; margin-top: 1.5vh;">
				<span style="color:yellow">Leaderboards</span> are coming soonâ„¢
			</p>
			<img src="../assets/ok.png" width=20%; class="gdButton center closeWindow">
		</div>
	</div>

	<div class="popup" id="saveDiv">
		<div class="fancybox bounce center supercenter">
			<h2 class="smaller center" style="font-size: 5.5vh">Saved!</h2>
			<p class="bigger center" style="line-height: 5vh; margin-top: 1.5vh;">
				<span style="color:yellow">[[NAME]]</span> has been added to your <a class="youCanClickThis2" style="color:lime" href="../search/levels?type=saved">saved levels</a> list.
			</p>
			<img src="../assets/ok.png" width=20%; class="gdButton center" onclick="location.reload()">
		</div>
	</div>

	<div class="popup" id="deleteDiv">
		<div class="fancybox bounce center supercenter" style="width: 60vh; height: 28%">
			<h2 class="smaller center" style="font-size: 5.5vh">Delete Level</h2>
			<p class="bigger center" style="line-height: 5vh; margin-top: 1.5vh;">
				Are you sure you want to <span style="color:#C67A7E">delete</span> this level from your <a class="youCanClickThis2"style="color:lime" href="../search/levels?type=saved">saved levels </a>list?
			</p>
			<img src="../assets/btn-no.png" height=25%; class="gdButton center closeWindow">
			<img src="../assets/btn-yes.png" height=25%; class="gdButton center sideSpaceB" onclick="deleteLevel()">
		</div>
	</div>

	<div style="position:absolute; bottom: 0%; left: 0%; width: 100%">
		<img class="cornerPiece" src="../assets/corner.png" width=7%;>
	</div>

	<div style="position:absolute; bottom: 0%; right: 0%; width: 100%; text-align: right;">
		<img class="cornerPiece" src="../assets/corner.png" width=7%; style="transform: scaleX(-1)">
	</div>
	<div class="flex" style="align-items: flex-start;">
    <div class="flex vertical spaceAround" style="width: 80%; height: 100%; justify-content: flex-start; margin-left: 8vw;">
      <div class="center" style="width: 70%; margin: 1% auto">
        <h1 style="transform: scale(1.2)">[[NAME]]</h1>
      </div>
    
      <div class="center flex vertical spaceBetween" style="height: 10%;">
        <h2 class="slightlySmaller normalCursor gdButton" id="authorName"><a class="linkButton" id="authorLink" href="../profile/[[AUTHOR]]">By [[AUTHOR]]</a></h2>
        <div class="normalCursor flex spaceBetween" style="width: 50%; height: 100%;">
          <img id="copiedBadge" style="height: 4vh; cursor: help" src="../assets/copied.png" title="Level is a copy or a collaboration">
          <img id="largeBadge" style="height: 4vh; cursor: help" src="../assets/large.png" title="Contains more than 40,000 objects">
        </div>
      </div>

      <div class="flex" style="width: 80%; height: 50%; text-align: center; align-items: flex-start; justify-content: flex-end;">
        <div class="flex vertical" style="height: 100%; width: 20%; justify-content: space-around;">
          <div class="flex vertical">
            <img src="../difficulty/[[DIFFICULTYFACE]].png" style="height: 20%">
            <h1 class="smaller" id="difficultytext">[[DIFFICULTY]]</h1>
          </div>
          <div class="flex stars"><h1 style="width: 100%; font-size: 4vh">[[STARS]]</h1><img src="../assets/star.png" style="height: 3vh; padding-bottom: 0.5vh;"></div>
          <div class="flex diamonds"><h1 style="width: 100%; font-size: 4vh">[[DIAMONDS]]</h1><img src="../assets/diamond.png" style="height: 3vh; padding-bottom: 0.5vh;"></div>
          <div class="flex demonList" style="display: none;"><h1 style="width: 100%; font-size: 4vh">#[[DEMONLIST]]</h1><img src="../assets/demon.png" style="height: 3vh; padding-bottom: 0.5vh"></div>
          <div id="coins" class="flex" style="width: 100%; justify-content: center;"></div>
        </div>
        <div class="center noClick">
          <img class="gdButton yesClick" id="playButton" src="../assets/play.png" style="width: 50%;">
        </div>
        <div class="flex vertical spaceBetween" style="align-items: flex-start; height: 70%">
          <div class="flex"><img src="../assets/download.png" style="height: 5.5vh; padding-bottom: 0.5vh; margin-right: 1vw;"><h1 style="width: 100%; font-size: 6vh">[[DOWNLOADS]]</h1></div>
          <div class="flex"><img src="../assets/like.png" style="height: 5.5vh; padding-bottom: 0.5vh; margin-right: 1vw;"><h1 style="width: 100%; font-size: 6vh">[[LIKES]]</h1></div>
          <div class="flex"><img src="../assets/time.png" style="height: 5.5vh; padding-bottom: 0.5vh; margin-right: 1vw;"><h1 style="width: 100%; font-size: 6vh">[[LENGTH]]</h1></div>
          <div class="flex"><img src="../assets/orbs.png" style="height: 5.5vh; padding-bottom: 0.5vh; margin-right: 1vw;"><h1 style="width: 100%; font-size: 6vh">[[ORBS]]</h1></div>
        </div>
      </div>
      <div class="brownBox" id="songBox">
        <div style="margin-left: 0.5%">
          <h1 class="slightlySmaller" id="songname">[[SONGNAME]]</h1>
          <h2 class="smaller">By: [[SONGAUTHOR]] <a class="songLink" href="https://[[SONGAUTHOR]].newgrounds.com" target="_blank"><img class="gdButton valign" src="../assets/more.png" width="12%"></a></h2>
        </div>
        <h3 id="songInfo">SongID: [[SONGID]] &nbsp;&nbsp; Size: [[SONGSIZE]]</h3>
      </div>
    </div>
    <div class="levelButtons" style="width: 20%">
      <img class="gdButton sideButton" id="saveButton" src="../assets/plus.png" onclick="$('#saveDiv').show(); saveLevel()"><br>
      <img class="gdButton sideButton" id="infoButton"  src="../assets/info.png" onclick="$('#infoDiv').show()"><br>
      <a href="./comments/[[ID]]"><img class="gdButton sideButton" src="../assets/comment.png"></a><br>
      <a class="songLink" href="https://www.newgrounds.com/audio/listen/[[SONGID]]" target="_blank"><img class="gdButton sideButton" src="../assets/playsong.png"></a>
      <a href="./analyze/[[ID]]"><img class="gdButton sideButton" src="../assets/edit.png"></a><br>
      <img class="gdButton sideButton outOfOrder" id="scoreButton" src="../assets/leaderboard.png" onclick="$('#scoreDiv').show()"><br>
    </div>
	</div>

	<div style="position:absolute; top: 2%; left: 1.5%; width: 10%; height: 25%; pointer-events: none">
		<img class="gdButton yesClick" id="backButton" src="../assets/back.png" height="30%" onclick="backButton()">
	</div>
	<div id="copied" style="display: none;">
		<div class="copied center noClick" style="position:absolute; top: 36%; left: 50%; transform: translate(-50%,-50%); width: 80vh">
			<h1 class="smaller noSelect">ID copied to clipboard</h1>
		</div>
	</div>

</div>

</body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script async type="text/javascript" src="../assets/sizecheck.js"></script>
<script>

if (window.location.href.endsWith('?download')) $('#infoDiv').show()

	let freeze = false;
	$('#playButton').click(function() {
	if (!($('#copied').is(':animated'))) $('#copied').stop().fadeIn(200).delay(500).fadeOut(500)
	var temp = $("<input>");
    $("body").append(temp);
    temp.val('[[ID]]').select();
    document.execCommand("copy"); temp.remove()})
$('.closeWindow').click(function() {if (!freeze) $(".popup").attr('style', 'display: none;')})

$('#difficultytext').html('[[DIFFICULTY]]'.replace(' ', "<br>"))

$('#levelInfo').html($('#levelInfo').html()
	.replace('[[ORIGINALINFO]]', [[COPIEDID]] ==  "0" ? "" : `<br>Original: <a class="youCanClickThis" href="/[[COPIEDID]]"><span style="color:aqua">[[COPIEDID]]</span></a>`)
	.replace('[[OBJECTINFO]]', '[[OBJECTS]]' ==  "0" ? "" : `<br>Objects: <span style="color:yellow">[[OBJECTS]]</span>`)
	.replace('[[REQUESTED]]', [[STARSREQUESTED]] ==  "0" ? "" : `<br>Stars Requested: <span style="color:yellow">[[STARSREQUESTED]]</span>`))

if (!'[[UPLOADED]]'.startsWith('[')) {
	$('#levelInfo').html($('#levelInfo').html()
	.replace('[[PASS]]', `<br>Password: <span style="color:orange">${'[[PASSWORD]]' == '0' ? "No copy" : '[[PASSWORD]]' == 1 ? "Free copy" : '[[PASSWORD]]'}</span>`)
	.replace('[[LOWDETAIL]]', `<br>Low Detail: <span style="color:orange">${[[LDM]] ? "Yes" : "No"}</span>`)
	.replace('[[UPLOAD]]', '[[UPLOADED]]' == "0" ? "" : `<br>Uploaded: <span style="color:orange">[[UPLOADED]]</span>`)
	.replace('[[UPDATE]]', '[[UPDATED]]' == "0" ? "" : `<br>Updated: <span style="color:orange">[[UPDATED]]</span>`))}

else {
	$('#levelInfo').html($('#levelInfo').html()
	.replace('[[PASS]]', "")
	.replace('[[LOWDETAIL]]', "")
	.replace('[[UPLOAD]]', "")
	.replace('[[UPDATE]]', "") + 
	`<br><a class="youCanClickThis" href="/[[ID]]?download"><span style="color:aqua">Download additional info</span></a>`
	)}

if (![[LARGE]]) $('#largeBadge').hide()
if ([[COPIEDID]] == 0) $('#copiedBadge').hide()
if ([[ORBS]] == 0) $('.orbs').hide()
if ([[STARS]] == 0) $('.stars').hide()
if ([[DIAMONDS]] == 0 || !'[[DEMONLIST]]'.startsWith("[")) $('.diamonds').hide()

if (!'[[DEMONLIST]]'.startsWith("[")) $('.demonList').show()
else $('.demonList').remove()


if ("[[SONGID]]".startsWith("Level")) {
	$('#songInfo').text('[[SONGID]]')
	$('.songLink').hide()}

if ("[[INVALIDSONG]]" == "true") $('.songLink').hide()
if ("[[DISLIKED]]" == "true") $('#likeImg').attr('src', '../assets/dislike.png').css('transform', 'translateY(20%)')

let coinColor = [[VERIFIEDCOINS]] ? "silvercoin" : "browncoin"
if ([[COINS]] > 0) $("#coins").append(`<img src="../assets/${coinColor}.png" style="height: 3vh; padding-bottom: 0.5vh">`)
if ([[COINS]] > 1) $("#coins").append(`<img src="../assets/${coinColor}.png" style="height: 3vh; padding-bottom: 0.5vh">`)
if ([[COINS]] > 2) $("#coins").append(`<img src="../assets/${coinColor}.png" style="height: 3vh; padding-bottom: 0.5vh">`)

if ("[[ACCOUNTID]]" == "0") {
		$("#authorName").addClass("green").removeClass('gdButton')
		$("#authorLink").removeAttr('href')
	}

if (window.location.pathname == "/weekly") $('body').addClass('darkBG')


$(window).on('load', function() {

	if ($('#songname')[0].scrollWidth > $('#songBox')[0].scrollWidth) {
		let overflow = ($('#songname')[0].scrollWidth - $('#songBox')[0].scrollWidth) * 0.007
		if (overflow > 6) overflow = 3
		$('#songname').addClass('smaller').css('font-size', (6 - (overflow)) + 'vh')
		}
});


let savedLevels = JSON.parse(localStorage.getItem('saved') || '[]');
let deleteMode = false;
if (savedLevels.includes('[[ID]]')) {
	$('#saveButton').attr('src', '../assets/delete.png').attr('onclick', '$("#deleteDiv").show()')
}

function saveLevel() {
  savedLevels.push('[[ID]]');
  localStorage.setItem('saved', JSON.stringify(savedLevels));
}

function deleteLevel() {
  savedLevels = savedLevels.filter(function(el) {return el != '[[ID]]'})
  localStorage.setItem('saved', JSON.stringify(savedLevels));
  location.reload()
	freeze = true;
}

</script>